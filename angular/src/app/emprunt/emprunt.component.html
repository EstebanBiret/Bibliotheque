<div class="container mt-4">

  <!-- Emprunts en cours -->
  <ng-container *ngIf="empruntsEnCours.length > 0; else noEnCoursResults">
    <h3>Mes Emprunts en cours</h3><br>
    <ul class="list-group">
      <li class="list-group-item" *ngFor="let emprunt of empruntsEnCours">
        <div class="emprunt-item">
          <div class="emprunt-details">
            <span class="emprunt-title" [class.en-retard]="isEmpruntEnRetard(emprunt)">{{ getLivreTitle(emprunt) }}</span>
            <img [src]="(getLivrePhotoCouverture(emprunt) ? getLivrePhotoCouverture(emprunt) : 'https://islandpress.org/sites/default/files/default_book_cover_2015.jpg')" alt="image" class="img-fluid mb-4">
          </div>
          <div class="emprunt-info">
            <span class="emprunt-date"><strong>Date d'emprunt : </strong>{{ emprunt.date_emprunt | date }}</span>
            <span class="emprunt-date"><strong>Date de fin : </strong>{{ emprunt.date_retour | date }}</span>
            <span class="emprunt-status" [class.en-retard]="isEmpruntEnRetard(emprunt)" [ngClass]="{'en-cours': !isEmpruntEnRetard(emprunt), 'retard': isEmpruntEnRetard(emprunt)}">
              {{ isEmpruntEnRetard(emprunt) ? 'En cours (Retardé)' : 'En cours' }}
            </span>
          </div>
        </div>
      </li>
    </ul>
  </ng-container>

  <br><br><br>

  <!-- Emprunts terminés -->
  <ng-container *ngIf="empruntsTermines.length > 0; else noTerminesResults">
    <h3>Mes Emprunts terminés</h3><br>
    <ul class="list-group">
      <li class="list-group-item" *ngFor="let emprunt of empruntsTermines">
        <div class="emprunt-item">
          <div class="emprunt-details">
            <span class="emprunt-title">{{ getLivreTitle(emprunt) }}</span>
            <img [src]="(getLivrePhotoCouverture(emprunt) ? getLivrePhotoCouverture(emprunt) : 'https://islandpress.org/sites/default/files/default_book_cover_2015.jpg')" alt="image" class="img-fluid mb-4">
          </div>
          <div class="emprunt-info">
            <span class="emprunt-date"><strong>Date d'emprunt : </strong>{{ emprunt.date_emprunt | date }}</span>
            <span class="emprunt-date"><strong>Date de fin : </strong>{{ emprunt.date_retour | date }}</span>
            <span class="emprunt-status">Terminé</span>
          </div>
        </div>
      </li>
    </ul>
  </ng-container>

  <ng-template #noEnCoursResults>
    <p>Vous n'avez aucun emprunt en cours !</p>
  </ng-template>

  <ng-template #noTerminesResults>
    <p>Vous n'avez aucun emprunt terminé !</p>
  </ng-template>

  <ng-template #noResults>
    <p>Vous n'avez aucun emprunt !</p>
    <img src="assets/no_resa_emprunt.jpg" width="200px" alt="Aucun emprunt">
  </ng-template>

  <div class="d-flex justify-content-center mt-4">
    <button class="resa-button btn btn-primary" (click)="retourCompte()">Retour</button>
  </div>

  <br><br><br>
</div>
